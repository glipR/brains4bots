---
title: Lists and Compass
date: 2021-01-01 12:00:00 +1100
math: true
code: true
actual_prev:
  title: Loops and Infrared
  url: /posts/repeat
---

**TODO**

## Why lists?

At this point, hopefully you agree that we can do a lot of cool and different things with our programs.

In the last post, we learnt how to make code repeat certain instructions for an arbitrarily long time (Repeat this until this condition is true). What we are missing, however, is a similar thing for variables.

Consider a previous example of computing the square numbers smaller than 50:

<div class="code_container" markdown="1">

```python
x = 1

# Print x * x while it is <= 50.
while x * x <= 50:
    square = x * x
    print(f"{x}^2 = {square}")
    x = x + 1
```

```text
### Output ###
>>> 1^2 = 1
>>> 2^2 = 4
>>> 3^2 = 9
>>> 4^2 = 16
>>> 5^2 = 25
>>> 6^2 = 36
>>> 7^2 = 49
```

</div>

The main problem we run into is: After this loop has run, how can we remember all of the square numbers we calculated?
We can't create a new variable for each, because we don't necessarily now how many times this loop will run. That's where the list comes into play!

### Creating

A list does what it says on the tin: It is a list of other bits of data, and it starts and ends with square brackets `[]`.
Creating a list in python is super simple, you just write out the list as data:

```python
my_number = 3
# This is a list, with 3 items.
my_list = [1, "two", my_number]
```

We can find the length of a list (how many items are in it) by writing `len(my_list)`.

You can also add to a list, with `.append()`. So we can rewrite our old program to store the squares:

<div class="code_container" markdown="1">

```python
x = 1
# Create an empty list
squares = []

# Print x * x while it is <= 50.
while x * x <= 50:
    square = x * x
    # Add square to the list
    squares.append(square)
    x = x + 1

print(f"There are {len(squares)} squares <= 50")
print(squares)
```

```text
### Output ###
>>> There are 7 squares <= 50
>>> [1, 4, 9, 16, 25, 36, 49]
```

</div>

### Changing and Accessing

Creating a list is cool and all, but storing data is only useful if you can later modify or retrieve it. For example, in the code above, we might want to ask "What is the third square?". To do this, we write `squares[2]`. `squares[0]` is the first element (1), `squares[1]` is the second element (4), and `squares[2]` is the third element (9). This continues until the end of the list.

`squares[0],squares[1],squares[2]...` are essentially just variables, you can read and change their values in the same way. Because of this, we can also change the list. Writing `squares[4] = 0` will change the 5th item in the list from 25 to 0.

<div class="puzzle" markdown="1" title="Sequence of Commands">

Martin has written a program so that he can give his robot a sequence of commands, each specifying a direction (Left, Right, or Straight) and a distance (in cm).

Currently, however, it has 2 problems which cause errors in his code. Your task is to fix the robot so that it follows the commands correctly.

You can download the puzzle [here](ev3simc://drive.google.com/uc?export=download&id=1qhFA3m6E91_3oIe729z3XrFhrbpwxHmo).

![Example gif of the puzzle begin completed](/assets/img/sequence_commands.gif)

**TODO Hints**

**TODO Gif with sticking to lines**

</div>

### Strings and Splitting / Joining

One place Python already has introduced you to something like a list is strings. Strings are like lists of characters, and you can index them too:

<div class="code_container" markdown="1">

```python
my_string = "Testing"
print(my_string[2])
print(my_string[6])
```

```text
### Output ###
>>> s
>>> g
```

</div>

Even more useful, we can break a string up with the `split` function. `split` takes some character in between the brackets, and will break up the original string into a list, based on this character. If no character is given in the brackets, then any empty space will break up the string.

<div class="code_container" markdown="1">

```python
my_underline_string = "Beep_Boop_Blargh"
my_space_string = "Hello Testing 1234"
print(my_underline_string.split("_"))
print(my_space_string.split())
```

```text
### Output ###
>>> ["Beep", "Boop", "Blargh"]
>>> ["Hello", "Testing", "1234"]
```

</div>

If you want to go back from a list of strings, to one big long string, you can use the `join` method:

<div class="code_container" markdown="1">

```python
my_split_underline_string = ["Beep", "Boop", "Blargh"]
my_split_space_string = ["Hello", "Testing", "1234"]
print("_".join(my_split_underline_string))
print(" ".join(my_split_space_string))
```

```text
### Output ###
>>> Beep_Boop_Blargh
>>> Hello Testing 1234
```

</div>

`a.join([x, y, z])` will print `xayaz` (*Joining* the items in the list, with `a` in between).

**TODO Task on list splitting with loops**

## The Compass Sensor

So far we've just been turning left/right/up/down by remembering our current direction, and rotating accordingly. However, this is bad for a few reasons:

* In real life, we can't get exactly straight in one direction. After a series of turns, we will slowly drift off course.
* As you saw in the previous puzzle, this can be quite hard to do.
* It is even harder to do with any general rotation, not just the four cardinal directions.

For this reason we introduce the *Compass Sensor*. The Compas Sensor has a pretty simple purpose - it tells us what rotation we have, relative to some starting point. We use it in a very similar way to the infrared sensor:

```python
import time
from ev3dev2.sensor import Sensor, INPUT_1

# Connect to the sensor
compass = Sensor(INPUT_1, driver_name="ht-nxt-compass")

# Calibrate the compass (Tell it what north is)
compass.command = "BEGIN-CAL"
compass.command = "END-CAL"

while True:
    # This ranges from 0 to 359 (Clockwise rotation from starting position).
    bearing = compass.value()
    print(f"We are at {bearing} degrees")
    time.sleep(0.5)
```

<div class="puzzle" markdown="1" title="Locations">

Martin is back with a new robot this time, but he hasn't written any program yet!

This robot should take in a list of locations, followed by a specific location Martin wants to move to. This location is measured in distance, as well as degrees required to rotate (Where 0 degrees is to the right, and positive degree = counter-clockwise movement).

Can you help him? You can download the puzzle [here](ev3simc://drive.google.com/uc?export=download&id=1C1uhvR1lnEDp-L4hrzEnn95wStjLK6HT).

![Example gif of the puzzle being completed](/assets/img/locations.gif)

**TODO Hints**

</div>

## List Splicing

### Simple splicing

One other cool thing we can do with lists is *splice* them. Splicing is similar to indexing, although rather than just retrieving one item from the list, you can retrieve multiple. The code is very similar to indexing.

To get the 3rd, 4th and 5th items from a list, you can write the following:

<div class="code_container" markdown="1">

```python
my_list = [1, 2, 3, 4, 5, 6, 7]
print(my_list[2:5])
```

```text
### Output ###
>>> [3, 4, 5]
```

</div>

The left number is where to start the splice (`2` means 3rd item, just like indexing), and the right number is where to end the splice (`5` means stop before the 6th item).

If you leave these numbers blank, then they default to the start and end of the list.

<div class="code_container" markdown="1">

```python
my_list = [1, 2, 3, 4, 5, 6, 7]
print(my_list[:3])
print(my_list[3:])
```

```text
### Output ###
>>> [1, 2, 3]
>>> [4, 5, 6, 7]
```

</div>

### Negatives and Jumps

Splice indicies can also be negative, so `my_list[-3:-1]` would get the 3rd and 2nd last elements.

Lastly, a third number can be given in a slice, to change the *distance* between items selected:

<div class="code_container" markdown="1">

```python
my_list = [1, 2, 3, 4, 5, 6, 7]
# 1st until the 6th element. Jump 2 every time.
print(my_list[:6:2])
# 2nd until the 7th element. Jump 3 every time.
print(my_list[1:6:3])
```

```text
### Output ###
>>> [1, 3, 5]
>>> [2, 5]
```

</div>

The distance given can also be negative, to reverse the order of elements! (Have a play around).

<div class="puzzle" markdown="1" title="Days of the Month">

Anna has collected some data about the weather at her house for the past month.

From this data, she'd like to print the weather for

* The second, third, and fourth days.
* The last two days.
* The first two Fridays.
* The 2nd, 3rd and 4th last days (in that order).

You can download the puzzle [here](ev3simc://drive.google.com/uc?export=download&id=1K3gH0GFKqAmt79G5vaph72nDkanRDzn3).

![Example gif of the puzzle being completed](/assets/img/month.gif)

**TODO Hints**

</div>

## Fast Looping

Last week we covered the `while` loop, a bit of code that runs a variable (variable in that it *varies*) amount of times. And this week we covered `lists`, a data type whose length varies. Because of this, we often end up writing very similar bits of code to loop over the items in a list, or something similar:

```python
my_list = [...]

counter = 0
while counter < len(my_list):
    # Do something with my_list[counter]
    counter = counter + 1
```

However, there's a lot of things we can miss here, like:

* `counter = counter + 1` (Or your code just runs forever)
* Creating the variable `counter = 0`.
* Using the correct statement `counter < len(my_list)`

Which all sounds simple, but in the middle of a large program you can definitely forget! Luckily Python has a few more keywords designed specifically for looping over lists and similar objects.

### On lists

If we want to loop over the items in a list, we can use the following code:

<div class="code_container" markdown="1">

```python
my_list = [1, 2, 3]
for list_item in my_list:
    print(list_item)
```

```text
### Output ###
>>> 1
>>> 2
>>> 3
```

</div>

The `for` loop acts like a `while` loop, where it repeats indented code. Instead of a condition to stop looping, you specify a variable (`list_item`), and a collection of items (`my_list`).

The `for` loop then repeats the indented code, once for every item in the collection, setting `list_item` to that particular item.

You can also do this with strings, since they can be viewed as a collection of characters!

<div class="code_container" markdown="1">

```python
my_string = "abcd"
for my_char in my_list:
    print("Next character is:", my_char)
```

```text
### Output ###
>>> Next character is: a
>>> Next character is: b
>>> Next character is: c
>>> Next character is: d
```

</div>

### On numbers

One bad thing about these `for` loops so far is that we can't modify the lists at the same time. For example we couldn't really translate this block of code into using a `for` loop:

<div class="code_container" markdown="1">

```python
my_list = [1, 2, 3]
counter = 0
while counter < len(my_list):
    my_list[counter] = my_list[counter] + 4
    counter = counter + 1
print(my_list)
```

```text
### Output ###
>>> [5, 6, 7]
```

</div>

However, rather than trying to loop over the collection of items in the list, what if we could instead loop over the *indexes* of the list? Well you're in luck!

<div class="code_container" markdown="1">

```python
my_list = [1, 2, 3]

for counter in range(0, len(my_list))
    print(counter)
    my_list[counter] = my_list[counter] + 4

print(my_list)
```

```text
### Output ###
>>> 0
>>> 1
>>> 2
>>> [5, 6, 7]
```

</div>

You can think of `range` exactly like a spliced collection of numbers. You can specify a start and an end point (Where you include the start but not the endpoint).

<div class="note" markdown="1" title="More range things">

Just like a splice you can also include a third number, to specify the jump distance (With negative values working too!).
Additionally, if you specify just one number like `range(a)`, it is the same as `range(0, a)`.

<div class="code_container" markdown="1">

```python
for x in range(3):
    print(x)
```

```text
### Output ###
>>> 0
>>> 1
>>> 2
```

</div>

<div class="code_container" markdown="1">

```python
for x in range(3, 8, 3):
    print(x)
```

```text
### Output ###
>>> 3
>>> 6
```

</div>

</div>

<div class="puzzle" markdown="1" title="3 of a Kind">

You are playing a rather simple card game with Sydney. In this game, all you have to do is spot a specific group of 3 cards with the same face value. you've decided you want to demolish Sydney with a program that runs super fast.

Your program will first take as input a number \\(n\\) - the number of cards in the hand, followed by \\(n\\) lines of input, which is the face value of each card.

If there is a triple, print the indicies of these cards in the hand. Otherwise, print "No triples!" or something similar.

You can download the puzzle [here](ev3simc://drive.google.com/uc?export=download&id=1Y1O_UcV78ytFnD0BFMkmAXRGcnicse4u).

![Example gif of the puzzle being completed](/assets/img/3_kind.gif)

**TODO Hints**

</div>

## Project

**TODO**
